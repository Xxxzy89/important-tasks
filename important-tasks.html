<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡è¦äº‹åŠ¡è®°å½• & é—¹é’Ÿæé†’</title>
    <style>
        /* Tailwind CSS CDN */
        @import url('https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css');
        
        /* è‡ªå®šä¹‰é¢œè‰²å˜é‡ */
        :root {
            --primary-blue: #2563eb;
            --primary-blue-light: #3b82f6;
            --primary-blue-dark: #1d4ed8;
            --accent-purple: #8b5cf6;
            --accent-purple-light: #a78bfa;
            --white: #ffffff;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-600: #4b5563;
            --gray-800: #1f2937;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--white) 0%, var(--gray-50) 100%);
            min-height: 100vh;
            margin: 0;
            color: var(--gray-800);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .header {
            text-align: center;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--accent-purple) 100%);
            padding: 3rem 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px -5px rgba(37, 99, 235, 0.3);
            color: var(--white);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255,255,255,0.05) 10px,
                rgba(255,255,255,0.05) 20px
            );
            animation: float 20s linear infinite;
        }
        
        @keyframes float {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 1.125rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .header p {
            color: var(--gray-600);
            font-size: 1.125rem;
        }
        
        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            background: var(--white);
            border-radius: 0.75rem;
            padding: 0.5rem;
            box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }
        
        .nav-tab {
            flex: 1;
            min-width: 200px;
            padding: 1rem 1.5rem;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--gray-600);
        }
        
        .nav-tab.active {
            background: var(--primary-blue);
            color: var(--white);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        
        .nav-tab:hover:not(.active) {
            background: var(--gray-100);
            color: var(--primary-blue);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .card {
            background: var(--white);
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }
        
        .card h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            color: var(--gray-800);
            margin-bottom: 0.5rem;
        }
        
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--gray-200);
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--white);
        }
        
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            font-size: 1rem;
        }
        
        .btn-primary {
            background: var(--primary-blue);
            color: var(--white);
        }
        
        .btn-primary:hover {
            background: var(--primary-blue-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        
        .btn-secondary {
            background: var(--accent-purple);
            color: var(--white);
        }
        
        .btn-secondary:hover {
            background: var(--accent-purple-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }
        
        .btn-danger {
            background: #ef4444;
            color: var(--white);
        }
        
        .btn-danger:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }
        
        .priority-high { border-left: 4px solid #ef4444; }
        .priority-medium { border-left: 4px solid #f59e0b; }
        .priority-low { border-left: 4px solid #10b981; }
        
        .task-item, .alarm-item {
            background: var(--gray-50);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary-blue);
            transition: all 0.3s ease;
        }
        
        .task-item:hover, .alarm-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .task-title, .alarm-title {
            font-weight: 700;
            font-size: 1.125rem;
            color: var(--gray-800);
            margin-bottom: 0.5rem;
        }
        
        .task-description, .alarm-description {
            color: var(--gray-600);
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .task-meta, .alarm-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            font-size: 0.875rem;
            color: var(--gray-600);
            margin-bottom: 1rem;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        .priority-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .priority-high-badge { background: #fee2e2; color: #dc2626; }
        .priority-medium-badge { background: #fef3c7; color: #d97706; }
        .priority-low-badge { background: #d1fae5; color: #059669; }
        
        .task-actions, .alarm-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: 0.75rem;
            text-align: center;
            box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.1);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-blue);
        }
        
        .stat-label {
            color: var(--gray-600);
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--gray-600);
            border: 2px dashed var(--gray-200);
            border-radius: 1rem;
            background: var(--gray-50);
        }
        
        .empty-state svg {
            width: 4rem;
            height: 4rem;
            margin-bottom: 1rem;
            opacity: 0.3;
            color: var(--primary-blue);
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem 0.5rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .nav-tab {
                min-width: 150px;
                padding: 0.75rem 1rem;
                font-size: 0.875rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .task-actions, .alarm-actions {
                flex-direction: column;
            }
            
            .btn {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ¯ é‡è¦äº‹åŠ¡ç®¡ç†</h1>
            <p>é«˜æ•ˆç®¡ç†æ‚¨çš„å…³é”®ä»»åŠ¡å’Œé‡è¦æé†’</p>
        </div>
        
        <!-- å¯¼èˆªæ ‡ç­¾ -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('tasks')">ğŸ“‹ é‡è¦äº‹åŠ¡</button>
            <button class="nav-tab" onclick="switchTab('alarms')">â° é—¹é’Ÿæé†’</button>
            <button class="nav-tab" onclick="switchTab('stats')">ğŸ“Š ç»Ÿè®¡æ¦‚è§ˆ</button>
        </div>
        
        <!-- é‡è¦äº‹åŠ¡æ ‡ç­¾é¡µ -->
        <div id="tasks" class="tab-content active">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- æ·»åŠ äº‹åŠ¡è¡¨å• -->
                <div class="lg:col-span-1">
                    <div class="card">
                        <h2>â• æ·»åŠ æ–°äº‹åŠ¡</h2>
                        <form id="taskForm">
                            <div class="form-group">
                                <label class="form-label" for="taskTitle">äº‹åŠ¡æ ‡é¢˜ *</label>
                                <input type="text" id="taskTitle" class="form-input" placeholder="è¾“å…¥äº‹åŠ¡æ ‡é¢˜" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskDescription">è¯¦ç»†æè¿°</label>
                                <textarea id="taskDescription" class="form-textarea" rows="3" placeholder="è¾“å…¥è¯¦ç»†æè¿°..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskPriority">ä¼˜å…ˆçº§</label>
                                <select id="taskPriority" class="form-select">
                                    <option value="high">ğŸ”´ é«˜ä¼˜å…ˆçº§</option>
                                    <option value="medium" selected>ğŸŸ¡ ä¸­ä¼˜å…ˆçº§</option>
                                    <option value="low">ğŸŸ¢ ä½ä¼˜å…ˆçº§</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskDueDate">æˆªæ­¢æ—¥æœŸ</label>
                                <input type="date" id="taskDueDate" class="form-input">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="taskCategory">åˆ†ç±»</label>
                                <input type="text" id="taskCategory" class="form-input" placeholder="å¦‚ï¼šå·¥ä½œã€ç”Ÿæ´»ã€å­¦ä¹ ">
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-full">
                                ğŸ’¾ ä¿å­˜äº‹åŠ¡
                            </button>
                        </form>
                    </div>
                </div>
                
                <!-- äº‹åŠ¡åˆ—è¡¨ -->
                <div class="lg:col-span-2">
                    <div class="card">
                        <h2>ğŸ“ äº‹åŠ¡åˆ—è¡¨</h2>
                        <div id="tasksList">
                            <div class="empty-state">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                                </svg>
                                <h3>æš‚æ— äº‹åŠ¡è®°å½•</h3>
                                <p>æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ªé‡è¦äº‹åŠ¡å¼€å§‹ç®¡ç†å§ï¼</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é—¹é’Ÿæé†’æ ‡ç­¾é¡µ -->
        <div id="alarms" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- æ·»åŠ é—¹é’Ÿè¡¨å• -->
                <div class="lg:col-span-1">
                    <div class="card">
                        <h2>â° è®¾ç½®æ–°æé†’</h2>
                        <form id="alarmForm">
                            <div class="form-group">
                                <label class="form-label" for="alarmTitle">æé†’æ ‡é¢˜ *</label>
                                <input type="text" id="alarmTitle" class="form-input" placeholder="è¾“å…¥æé†’æ ‡é¢˜" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="alarmDescription">æé†’å†…å®¹</label>
                                <textarea id="alarmDescription" class="form-textarea" rows="2" placeholder="è¾“å…¥æé†’å†…å®¹..."></textarea>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-2">
                                <div class="form-group">
                                    <label class="form-label" for="alarmTime">æ—¶é—´ *</label>
                                    <input type="time" id="alarmTime" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="alarmDate">æ—¥æœŸ</label>
                                    <input type="date" id="alarmDate" class="form-input">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="alarmRepeat">é‡å¤</label>
                                <select id="alarmRepeat" class="form-select">
                                    <option value="none">ä¸é‡å¤</option>
                                    <option value="daily">æ¯å¤©</option>
                                    <option value="weekly">æ¯å‘¨</option>
                                    <option value="monthly">æ¯æœˆ</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="alarmSound">é“ƒå£°</label>
                                <select id="alarmSound" class="form-select">
                                    <option value="default">é»˜è®¤é“ƒå£°</option>
                                    <option value="gentle">æ¸©å’Œé“ƒå£°</option>
                                    <option value="urgent">ç´§æ€¥é“ƒå£°</option>
                                </select>
                            </div>
                            
                            <button type="submit" class="btn btn-secondary w-full">
                                ğŸ”” è®¾ç½®æé†’
                            </button>
                        </form>
                    </div>
                </div>
                
                <!-- é—¹é’Ÿåˆ—è¡¨ -->
                <div class="lg:col-span-2">
                    <div class="card">
                        <h2>â° æ´»è·ƒæé†’</h2>
                        <div id="alarmsList">
                            <div class="empty-state">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <h3>æš‚æ— æ´»è·ƒæé†’</h3>
                                <p>è®¾ç½®ä¸€ä¸ªæé†’æ¥å¸®æ‚¨è®°ä½é‡è¦æ—¶åˆ»ï¼</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ç»Ÿè®¡æ¦‚è§ˆæ ‡ç­¾é¡µ -->
        <div id="stats" class="tab-content">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalTasks">0</div>
                    <div class="stat-label">æ€»äº‹åŠ¡æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="highPriorityTasks">0</div>
                    <div class="stat-label">é«˜ä¼˜å…ˆçº§</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeAlarms">0</div>
                    <div class="stat-label">æ´»è·ƒæé†’</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completedTasks">0</div>
                    <div class="stat-label">å·²å®Œæˆ</div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="card">
                    <h2>ğŸ“ˆ æœ€è¿‘æ´»åŠ¨</h2>
                    <div id="recentActivity">
                        <div class="empty-state">
                            <p>æš‚æ— æ´»åŠ¨è®°å½•</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h2>ğŸ¯ ä»Šæ—¥é‡ç‚¹</h2>
                    <div id="todayFocus">
                        <div class="empty-state">
                            <p>ä»Šæ—¥æ— é‡ç‚¹ä»»åŠ¡</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€æ•°æ®å­˜å‚¨
        let tasks = JSON.parse(localStorage.getItem('importantTasks')) || [];
        let alarms = JSON.parse(localStorage.getItem('importantAlarms')) || [];
        
        // æ ‡ç­¾é¡µåˆ‡æ¢
        function switchTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µå†…å®¹
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰å¯¼èˆªæ ‡ç­¾çš„æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µ
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // å¦‚æœåˆ‡æ¢åˆ°ç»Ÿè®¡é¡µé¢ï¼Œæ›´æ–°ç»Ÿè®¡æ•°æ®
            if (tabName === 'stats') {
                updateStats();
            }
        }
        
        // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveData() {
            localStorage.setItem('importantTasks', JSON.stringify(tasks));
            localStorage.setItem('importantAlarms', JSON.stringify(alarms));
        }
        
        // æ ¼å¼åŒ–æ—¥æœŸ
        function formatDate(dateString) {
            if (!dateString) return 'æœªè®¾ç½®';
            const date = new Date(dateString);
            return date.toLocaleDateString('zh-CN');
        }
        
        // æ ¼å¼åŒ–æ—¶é—´
        function formatTime(timeString) {
            if (!timeString) return '';
            return timeString;
        }
        
        // è·å–ä¼˜å…ˆçº§æ ·å¼ç±»
        function getPriorityClass(priority) {
            switch(priority) {
                case 'high': return 'priority-high';
                case 'medium': return 'priority-medium';
                case 'low': return 'priority-low';
                default: return 'priority-medium';
            }
        }
        
        // è·å–ä¼˜å…ˆçº§å¾½ç« 
        function getPriorityBadge(priority) {
            switch(priority) {
                case 'high': return '<span class="priority-badge priority-high-badge">é«˜ä¼˜å…ˆçº§</span>';
                case 'medium': return '<span class="priority-badge priority-medium-badge">ä¸­ä¼˜å…ˆçº§</span>';
                case 'low': return '<span class="priority-badge priority-low-badge">ä½ä¼˜å…ˆçº§</span>';
                default: return '<span class="priority-badge priority-medium-badge">ä¸­ä¼˜å…ˆçº§</span>';
            }
        }
        
        // æ¸²æŸ“äº‹åŠ¡åˆ—è¡¨
        function renderTasks() {
            const tasksList = document.getElementById('tasksList');
            
            if (tasks.length === 0) {
                tasksList.innerHTML = `
                    <div class="empty-state">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                        </svg>
                        <h3>æš‚æ— äº‹åŠ¡è®°å½•</h3>
                        <p>æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ªé‡è¦äº‹åŠ¡å¼€å§‹ç®¡ç†å§ï¼</p>
                    </div>
                `;
                return;
            }
            
            const tasksHtml = tasks.map((task, index) => `
                <div class="task-item ${getPriorityClass(task.priority)}">
                    <div class="task-title">${task.title}</div>
                    ${task.description ? `<div class="task-description">${task.description}</div>` : ''}
                    <div class="task-meta">
                        ${getPriorityBadge(task.priority)}
                        <div class="meta-item">
                            <span>ğŸ“…</span>
                            <span>${formatDate(task.dueDate)}</span>
                        </div>
                        <div class="meta-item">
                            <span>ğŸ·ï¸</span>
                            <span>${task.category || 'æœªåˆ†ç±»'}</span>
                        </div>
                        <div class="meta-item">
                            <span>ğŸ“</span>
                            <span>åˆ›å»ºäº ${formatDate(task.createdAt)}</span>
                        </div>
                    </div>
                    <div class="task-actions">
                        <button class="btn btn-primary" onclick="toggleTaskComplete(${index})">
                            ${task.completed ? 'â†©ï¸ æ ‡è®°æœªå®Œæˆ' : 'âœ… æ ‡è®°å®Œæˆ'}
                        </button>
                        <button class="btn btn-secondary" onclick="editTask(${index})">
                            âœï¸ ç¼–è¾‘
                        </button>
                        <button class="btn btn-danger" onclick="deleteTask(${index})">
                            ğŸ—‘ï¸ åˆ é™¤
                        </button>
                    </div>
                </div>
            `).join('');
            
            tasksList.innerHTML = tasksHtml;
        }
        
        // æ¸²æŸ“é—¹é’Ÿåˆ—è¡¨
        function renderAlarms() {
            const alarmsList = document.getElementById('alarmsList');
            
            if (alarms.length === 0) {
                alarmsList.innerHTML = `
                    <div class="empty-state">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <h3>æš‚æ— æ´»è·ƒæé†’</h3>
                        <p>è®¾ç½®ä¸€ä¸ªæé†’æ¥å¸®æ‚¨è®°ä½é‡è¦æ—¶åˆ»ï¼</p>
                    </div>
                `;
                return;
            }
            
            const alarmsHtml = alarms.map((alarm, index) => `
                <div class="alarm-item">
                    <div class="alarm-title">${alarm.title}</div>
                    ${alarm.description ? `<div class="alarm-description">${alarm.description}</div>` : ''}
                    <div class="alarm-meta">
                        <div class="meta-item">
                            <span>â°</span>
                            <span>${formatTime(alarm.time)}${alarm.date ? ' ' + formatDate(alarm.date) : ''}</span>
                        </div>
                        <div class="meta-item">
                            <span>ğŸ”„</span>
                            <span>${getRepeatText(alarm.repeat)}</span>
                        </div>
                        <div class="meta-item">
                            <span>ğŸ”Š</span>
                            <span>${getSoundText(alarm.sound)}</span>
                        </div>
                        <div class="meta-item">
                            <span>ğŸ“</span>
                            <span>åˆ›å»ºäº ${formatDate(alarm.createdAt)}</span>
                        </div>
                    </div>
                    <div class="alarm-actions">
                        <button class="btn btn-primary" onclick="toggleAlarmActive(${index})">
                            ${alarm.active ? 'â¸ï¸ æš‚åœ' : 'â–¶ï¸ å¯ç”¨'}
                        </button>
                        <button class="btn btn-secondary" onclick="editAlarm(${index})">
                            âœï¸ ç¼–è¾‘
                        </button>
                        <button class="btn btn-danger" onclick="deleteAlarm(${index})">
                            ğŸ—‘ï¸ åˆ é™¤
                        </button>
                    </div>
                </div>
            `).join('');
            
            alarmsList.innerHTML = alarmsHtml;
        }
        
        // è·å–é‡å¤æ–‡æœ¬
        function getRepeatText(repeat) {
            switch(repeat) {
                case 'daily': return 'æ¯å¤©';
                case 'weekly': return 'æ¯å‘¨';
                case 'monthly': return 'æ¯æœˆ';
                default: return 'ä¸é‡å¤';
            }
        }
        
        // è·å–é“ƒå£°æ–‡æœ¬
        function getSoundText(sound) {
            switch(sound) {
                case 'gentle': return 'æ¸©å’Œé“ƒå£°';
                case 'urgent': return 'ç´§æ€¥é“ƒå£°';
                default: return 'é»˜è®¤é“ƒå£°';
            }
        }
        
        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯å’Œæœ€è¿‘æ´»åŠ¨
        function updateStats() {
            const totalTasks = tasks.length;
            const highPriorityTasks = tasks.filter(task => task.priority === 'high').length;
            const activeAlarms = alarms.filter(alarm => alarm.active).length;
            const completedTasks = tasks.filter(task => task.completed).length;
            
            document.getElementById('totalTasks').textContent = totalTasks;
            document.getElementById('highPriorityTasks').textContent = highPriorityTasks;
            document.getElementById('activeAlarms').textContent = activeAlarms;
            document.getElementById('completedTasks').textContent = completedTasks;
            
            // æ›´æ–°æœ€è¿‘æ´»åŠ¨
            updateRecentActivity();
            
            // æ›´æ–°ä»Šæ—¥é‡ç‚¹
            updateTodayFocus();
        }
        
        // æ›´æ–°æœ€è¿‘æ´»åŠ¨
        function updateRecentActivity() {
            const activityContainer = document.getElementById('recentActivity');
            const recentItems = [];
            
            // è·å–æœ€è¿‘çš„äº‹åŠ¡å’Œé—¹é’Ÿæ´»åŠ¨
            tasks.slice(0, 3).forEach(task => {
                recentItems.push({
                    type: 'task',
                    title: task.title,
                    time: task.createdAt,
                    icon: task.completed ? 'âœ…' : 'ğŸ“',
                    description: task.completed ? 'å®Œæˆä»»åŠ¡' : 'åˆ›å»ºäº‹åŠ¡'
                });
            });
            
            alarms.slice(0, 2).forEach(alarm => {
                recentItems.push({
                    type: 'alarm',
                    title: alarm.title,
                    time: alarm.createdAt,
                    icon: alarm.active ? 'ğŸ””' : 'â¸ï¸',
                    description: alarm.active ? 'è®¾ç½®æé†’' : 'æš‚åœæé†’'
                });
            });
            
            // æŒ‰æ—¶é—´æ’åº
            recentItems.sort((a, b) => new Date(b.time) - new Date(a.time));
            
            if (recentItems.length === 0) {
                activityContainer.innerHTML = `
                    <div class="empty-state">
                        <p>æš‚æ— æ´»åŠ¨è®°å½•</p>
                    </div>
                `;
                return;
            }
            
            const activityHtml = recentItems.map(item => `
                <div class="task-item">
                    <div class="task-title">${item.icon} ${item.title}</div>
                    <div class="task-description">${item.description} Â· ${formatDate(item.time)}</div>
                </div>
            `).join('');
            
            activityContainer.innerHTML = activityHtml;
        }
        
        // æ›´æ–°ä»Šæ—¥é‡ç‚¹
        function updateTodayFocus() {
            const focusContainer = document.getElementById('todayFocus');
            const today = new Date().toISOString().split('T')[0];
            
            const todayTasks = tasks.filter(task => 
                task.dueDate === today && !task.completed && task.priority === 'high'
            );
            
            const upcomingAlarms = alarms.filter(alarm => 
                alarm.active && (!alarm.date || alarm.date >= today)
            ).slice(0, 3);
            
            if (todayTasks.length === 0 && upcomingAlarms.length === 0) {
                focusContainer.innerHTML = `
                    <div class="empty-state">
                        <p>ä»Šæ—¥æ— é‡ç‚¹ä»»åŠ¡</p>
                    </div>
                `;
                return;
            }
            
            let focusHtml = '';
            
            if (todayTasks.length > 0) {
                focusHtml += '<h3 class="font-semibold mb-2">ğŸ¯ ä»Šæ—¥é«˜ä¼˜å…ˆçº§ä»»åŠ¡</h3>';
                todayTasks.forEach(task => {
                    focusHtml += `
                        <div class="task-item priority-high">
                            <div class="task-title">${task.title}</div>
                            ${task.description ? `<div class="task-description">${task.description}</div>` : ''}
                        </div>
                    `;
                });
            }
            
            if (upcomingAlarms.length > 0) {
                if (focusHtml) focusHtml += '<h3 class="font-semibold mb-2 mt-4">â° å³å°†åˆ°æ¥çš„æé†’</h3>';
                upcomingAlarms.forEach(alarm => {
                    focusHtml += `
                        <div class="alarm-item">
                            <div class="alarm-title">${alarm.title}</div>
                            <div class="alarm-meta">
                                <div class="meta-item">
                                    <span>â°</span>
                                    <span>${formatTime(alarm.time)}${alarm.date ? ' ' + formatDate(alarm.date) : ''}</span>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            focusContainer.innerHTML = focusHtml;
        }
        
        // æ·»åŠ æ–°äº‹åŠ¡
        document.getElementById('taskForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            submitBtn.innerHTML = '<span class="loading"></span> ä¿å­˜ä¸­...';
            submitBtn.disabled = true;
            
            setTimeout(() => {
                const task = {
                    id: Date.now(),
                    title: document.getElementById('taskTitle').value,
                    description: document.getElementById('taskDescription').value,
                    priority: document.getElementById('taskPriority').value,
                    dueDate: document.getElementById('taskDueDate').value,
                    category: document.getElementById('taskCategory').value,
                    completed: false,
                    createdAt: new Date().toISOString().split('T')[0]
                };
                
                tasks.unshift(task);
                saveData();
                renderTasks();
                updateStats();
                
                // é‡ç½®è¡¨å•
                this.reset();
                document.getElementById('taskPriority').value = 'medium';
                
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                
                // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                showNotification('âœ… äº‹åŠ¡æ·»åŠ æˆåŠŸï¼', 'success');
            }, 500);
        });
        
        // æ·»åŠ æ–°é—¹é’Ÿ
        document.getElementById('alarmForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const alarm = {
                id: Date.now(),
                title: document.getElementById('alarmTitle').value,
                description: document.getElementById('alarmDescription').value,
                time: document.getElementById('alarmTime').value,
                date: document.getElementById('alarmDate').value,
                repeat: document.getElementById('alarmRepeat').value,
                sound: document.getElementById('alarmSound').value,
                active: true,
                createdAt: new Date().toISOString().split('T')[0]
            };
            
            alarms.unshift(alarm);
            saveData();
            renderAlarms();
            updateStats();
            
            // é‡ç½®è¡¨å•
            this.reset();
            
            alert('ğŸ”” æé†’è®¾ç½®æˆåŠŸï¼');
        });
        
        // ç¼–è¾‘äº‹åŠ¡
        function editTask(index) {
            const task = tasks[index];
            
            // å¡«å……è¡¨å•
            document.getElementById('taskTitle').value = task.title;
            document.getElementById('taskDescription').value = task.description || '';
            document.getElementById('taskPriority').value = task.priority;
            document.getElementById('taskDueDate').value = task.dueDate || '';
            document.getElementById('taskCategory').value = task.category || '';
            
            // æ›´æ”¹æŒ‰é’®æ–‡å­—
            const submitBtn = document.querySelector('#taskForm button[type="submit"]');
            submitBtn.textContent = 'ğŸ’¾ æ›´æ–°äº‹åŠ¡';
            
            // ä¸´æ—¶ä¿®æ”¹æäº¤è¡Œä¸º
            const form = document.getElementById('taskForm');
            const originalHandler = form.onsubmit;
            
            form.onsubmit = function(e) {
                e.preventDefault();
                
                // æ›´æ–°ä»»åŠ¡
                tasks[index] = {
                    ...task,
                    title: document.getElementById('taskTitle').value,
                    description: document.getElementById('taskDescription').value,
                    priority: document.getElementById('taskPriority').value,
                    dueDate: document.getElementById('taskDueDate').value,
                    category: document.getElementById('taskCategory').value
                };
                
                saveData();
                renderTasks();
                updateStats();
                
                // é‡ç½®è¡¨å•å’ŒæŒ‰é’®
                form.reset();
                document.getElementById('taskPriority').value = 'medium';
                submitBtn.textContent = 'ğŸ’¾ ä¿å­˜äº‹åŠ¡';
                form.onsubmit = originalHandler;
                
                alert('âœ… äº‹åŠ¡æ›´æ–°æˆåŠŸï¼');
            };
            
            // æ»šåŠ¨åˆ°è¡¨å•
            document.querySelector('.lg\:col-span-1').scrollIntoView({ behavior: 'smooth' });
        }
        
        // æ ‡è®°äº‹åŠ¡å®Œæˆ/æœªå®Œæˆ
        function toggleTaskComplete(index) {
            tasks[index].completed = !tasks[index].completed;
            tasks[index].completedAt = tasks[index].completed ? new Date().toISOString().split('T')[0] : null;
            saveData();
            renderTasks();
            updateStats();
        }
        
        // åˆ é™¤äº‹åŠ¡
        function deleteTask(index) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªäº‹åŠ¡å—ï¼Ÿ')) {
                const taskTitle = tasks[index].title;
                tasks.splice(index, 1);
                saveData();
                renderTasks();
                updateStats();
                alert(`ğŸ—‘ï¸ äº‹åŠ¡ "${taskTitle}" å·²åˆ é™¤`);
            }
        }
        
        // ç¼–è¾‘é—¹é’Ÿ
        function editAlarm(index) {
            const alarm = alarms[index];
            
            // å¡«å……è¡¨å•
            document.getElementById('alarmTitle').value = alarm.title;
            document.getElementById('alarmDescription').value = alarm.description || '';
            document.getElementById('alarmTime').value = alarm.time;
            document.getElementById('alarmDate').value = alarm.date || '';
            document.getElementById('alarmRepeat').value = alarm.repeat;
            document.getElementById('alarmSound').value = alarm.sound;
            
            // æ›´æ”¹æŒ‰é’®æ–‡å­—
            const submitBtn = document.querySelector('#alarmForm button[type="submit"]');
            submitBtn.textContent = 'ğŸ’¾ æ›´æ–°æé†’';
            
            // ä¸´æ—¶ä¿®æ”¹æäº¤è¡Œä¸º
            const form = document.getElementById('alarmForm');
            const originalHandler = form.onsubmit;
            
            form.onsubmit = function(e) {
                e.preventDefault();
                
                // æ›´æ–°é—¹é’Ÿ
                alarms[index] = {
                    ...alarm,
                    title: document.getElementById('alarmTitle').value,
                    description: document.getElementById('alarmDescription').value,
                    time: document.getElementById('alarmTime').value,
                    date: document.getElementById('alarmDate').value,
                    repeat: document.getElementById('alarmRepeat').value,
                    sound: document.getElementById('alarmSound').value
                };
                
                saveData();
                renderAlarms();
                updateStats();
                
                // é‡ç½®è¡¨å•å’ŒæŒ‰é’®
                form.reset();
                submitBtn.textContent = 'ğŸ”” è®¾ç½®æé†’';
                form.onsubmit = originalHandler;
                
                alert('âœ… æé†’æ›´æ–°æˆåŠŸï¼');
            };
            
            // æ»šåŠ¨åˆ°è¡¨å•
            document.querySelector('.lg\:col-span-1').scrollIntoView({ behavior: 'smooth' });
        }
        
        // åˆ‡æ¢é—¹é’Ÿæ¿€æ´»çŠ¶æ€
        function toggleAlarmActive(index) {
            const alarmTitle = alarms[index].title;
            alarms[index].active = !alarms[index].active;
            alarms[index].lastToggled = new Date().toISOString();
            saveData();
            renderAlarms();
            updateStats();
            
            const status = alarms[index].active ? 'å·²å¯ç”¨' : 'å·²æš‚åœ';
            alert(`â° æé†’ "${alarmTitle}" ${status}`);
        }
        
        // åˆ é™¤é—¹é’Ÿ
        function deleteAlarm(index) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæé†’å—ï¼Ÿ')) {
                const alarmTitle = alarms[index].title;
                alarms.splice(index, 1);
                saveData();
                renderAlarms();
                updateStats();
                alert(`ğŸ—‘ï¸ æé†’ "${alarmTitle}" å·²åˆ é™¤`);
            }
        }
        
        // ç®€å•çš„é—¹é’Ÿæ£€æŸ¥ï¼ˆæ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼‰
        function checkAlarms() {
            const now = new Date();
            const currentTime = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            const currentDate = now.toISOString().split('T')[0];
            
            alarms.forEach((alarm, index) => {
                if (alarm.active && alarm.time === currentTime) {
                    if (!alarm.date || alarm.date === currentDate) {
                        alert(`ğŸ”” æé†’ï¼š${alarm.title}\n${alarm.description || ''}`);
                        
                        // å¦‚æœä¸é‡å¤ï¼Œåˆ™è‡ªåŠ¨åœç”¨
                        if (alarm.repeat === 'none') {
                            alarms[index].active = false;
                            saveData();
                            renderAlarms();
                            updateStats();
                        }
                    }
                }
            });
        }
        
        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            renderTasks();
            renderAlarms();
            updateStats();
            
            // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºä»Šå¤©
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('taskDueDate').value = today;
            document.getElementById('alarmDate').value = today;
            
            // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡é—¹é’Ÿ
            setInterval(checkAlarms, 60000);
        });
    </script>
</body>
</html>